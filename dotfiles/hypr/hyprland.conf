monitor=eDP-1,preferred,0x0,1
exec-once=~/.config/hypr/monitor-hotplug.sh

exec-once = dbus-update-activation-environment --systemd DISPLAY WAYLAND_DISPLAY
exec-once = systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP

exec-once = hyprctl 
exec-once = waybar 
 
# Set SwayNC as the notification daemon
exec-once = swaync 
exec-once = hypridle 
exec-once = swww-daemon &
exec-once = sleep 1 && swww img ~/cloud/photos/wallpapers/landscape/forest_and_river_scene.jpg

# Execute apps at launch
exec-once = emacs & chromium

# Set programs that you use
$terminal = kitty
# $menu = wofi --show drun
$menu = wmenu-run -f "JetBrainsMono Nerd Font 14"
$browser = chromium
$emacs = emacs 
$fileManager = thunar

# Some default env vars.
# Environment variables for cursor - CRITICAL for Hyprland
env = XCURSOR_THEME,Nordzy-cursors-white
env = XCURSOR_SIZE,24

# gtk theming
env = GTK_THEME=Nordic-darker-v40 thunar

exec = gsettings set org.gnome.desktop.interface gtk-theme "Nordic-darker"
exec = gsettings set org.gnome.desktop.wm.preferences theme "Nordic-darker"
exec = gsettings set org.gnome.desktop.interface color-scheme "prefer-dark"   # for GTK4 apps

env = QT_QPA_PLATFORMTHEME,qt6ct   # for Qt apps

# Hyprcursor support (newer Hyprland versions)
env = HYPRCURSOR_THEME,Nordzy-cursors-white
env = HYPRCURSOR_SIZE,24
env = QT_QPA_PLATFORMTHEME,qt5ct # change to qt6ct if you have that

input {
    kb_layout = us
    kb_variant =
    kb_model =
    kb_options =
    kb_rules =

    repeat_delay = 250
    repeat_rate = 75

    follow_mouse = 1

    touchpad {
        natural_scroll = no
	    tap-to-click = no
        clickfinger_behavior = true
    }

    sensitivity = 0 # -1.0 to 1.0, 0 means no modification.
}

general {
    no_focus_fallback = true
    resize_on_border = true

    # gaps_in = 5
    gaps_in = 0
    # gaps_out = 10
    gaps_out = 0
    border_size = 2
    col.inactive_border = rgba(D6D3CCaa)

    # Set to master for a DWM like setup, defualt is dwindle
    layout = master

    # Please see https://wiki.hyprland.org/Configuring/Tearing/ before you turn this on
    allow_tearing = false
}

decoration {
    # See https://wiki.hyprland.org/Configuring/Variables/ for more
  active_opacity = 1
  inactive_opacity = 0.95

    # rounding = 3 
    rounding = 0
    
    blur {
        enabled = true
        size = 2
        passes = 3
        new_optimizations = true
        ignore_opacity = true
    }

}

animations {
    enabled = no
}

dwindle {
    # See https://wiki.hyprland.org/Configuring/Dwindle-Layout/ for more
    pseudotile = yes # master switch for pseudotiling. Enabling is bound to mainMod + P in the keybinds section below
    preserve_split = yes # you probably want this
}

misc {
    # See https://wiki.hyprland.org/Configuring/Variables/ for more
    force_default_wallpaper = 0 # Set to 0 or 1 to disable the anime mascot wallpapers
    animate_mouse_windowdragging = true
    animate_manual_resizes = true
    disable_splash_rendering = true
    enable_swallow = false
}

# Example per-device config
# See https://wiki.hyprland.org/Configuring/Keywords/#per-device-input-configs for more
device {
    name = epic-mouse-v1
    sensitivity = 1.0
}

device {
    name = tpps/2-ibm-trackpoint
    enabled = true
    sensitivity = -0.5
}

device {
    name = synps/2-synaptics-touchpad
	enabled = false
    disable_while_typing = true
}

# Window rules for applications
# Workspace assignments
# windowrulev2 = workspace 1, class:(Emacs)
windowrule = workspace 2, match:class ^(chromium)
windowrule = workspace 4, match:class ^(cider)
windowrule = workspace 6, match:class ^(gimp)
windowrule = workspace 6, match:class ^(darktable)
windowrule = workspace 6, match:class ^(com.obsproject.Studio)

# Opacity settings
windowrule = opacity 0.95 0.85, match:class ^(Emacs)
windowrule = opacity 0.95 0.85, match:class ^(thunar)

# Float and size for kitty
# windowrulev2 = float, class:(kitty)
# windowrulev2 = size 1280 720, class:(kitty)

$mainMod = SUPER

# Open wofi
bind = $mainMod, d, exec, $menu

# Open kitty
bind = $mainMod CTRL, RETURN, exec, $terminal

# Pick emojis
bind = $mainMod, grave, exec, ~/.local/bin/wmenuunicode

# Launch vterm emacs buffer
bind = $mainMod, E, exec, emacsclient -n -e '(my/new-frame-with-vterm)'
bind = $mainMod SHIFT, T, exec, emacsclient -n -e '(my/new-frame-with-vterm)'
# bind = $mainMod CONTROL, RETURN, exec, emacsclient -n -e '(my/new-frame-with-vterm)'
# Launch emacs
bind = $mainMod SHIFT, E, exec, emacs
# Emacs evreywhere in wayland
bind = $mainMod CONTROL, E, exec, emacsclient --eval '(thanos/type)'
windowrule = float on, match:title ^(emacs-float)
# Dirvish file manager
bind = $mainMod, R, exec, ~/.config/hypr/scripts/emacs-launcher '(progn (select-frame-set-input-focus (selected-frame)) (dirvish))'
# Using universal launcher in emacs
bind = $mainMod, SPACE, exec, ~/.config/hypr/scripts/emacs-launcher '(progn (select-frame-set-input-focus (selected-frame)) (universal-launcher-popup))'
# vterm
bind = $mainMod, Return, exec, ~/.config/hypr/scripts/emacs-launcher '(my-open-vterm-at-point)'
# Org capture from anywhere
bind = $mainMod, C, exec, ~/.config/hypr/scripts/emacs-launcher '(progn (select-frame-set-input-focus (selected-frame)) (org-capture))'
# password store
bind = $mainMod SHIFT, D, exec, ~/.config/hypr/scripts/emacs-launcher '(progn (select-frame-set-input-focus (selected-frame)) (pass))'
# Open calendar
bind = $mainMod SHIFT, C, exec, ~/.config/hypr/scripts/emacs-launcher '(progn (select-frame-set-input-focus (selected-frame)) (=calendar))'
# Open MU4e
bind = $mainMod, M, exec, ~/.config/hypr/scripts/emacs-launcher '(progn (select-frame-set-input-focus (selected-frame)) (=mu4e))'
# Open elfeed
# bind = $mainMod SHIFT, N, exec, ~/.config/hypr/scripts/emacs-launcher '(progn (select-frame-set-input-focus (selected-frame)) (elfeed))'
# Open notes
bind = $mainMod CTRL, N, exec, ~/.config/hypr/scripts/emacs-launcher '(progn (select-frame-set-input-focus (selected-frame)) (find-file "~/org/notes.org"))'
# Open org mode dashboard
bind = $mainMod, N, exec, ~/.config/hypr/scripts/emacs-launcher '(progn (select-frame-set-input-focus (selected-frame)) (org-agenda nil "w"))'
# Emacs clipboard manager
bind = $mainMod, Y, exec, ~/.config/hypr/scripts/emacs-launcher '(progn (select-frame-set-input-focus (selected-frame)) (my/clipboard-manager))'

# Hyprland
# Lock Screen
# Open file manager
bind = $mainMod SHIFT, R, exec, $fileManager
# Open browser
bind = $mainMod, W, exec, $browser
bind = $mainMod SHIFT, W, exec, $altbrowser
# Open notification
# bind = $mainMod CONTROL SHIFT, N, exec, swaync-client -t -sw
bind = $mainMod SHIFT, N, exec, swaync-client -t -sw
# Screenshot
bind = $mainMod CONTROL, 3, exec, ~/.config/hypr/scripts/screenshot.sh full
bind = $mainMod CONTROL, 4, exec, ~/.config/hypr/scripts/screenshot.sh zone
# Hyprpicker color picker
bind = $mainMod SHIFT, P, exec, hyprpicker -a
bind = $mainMod CONTROL, G, exec, gimp
bind = $mainMod CONTROL, D, exec, darktable
bind = $mainMod CONTROL, M, exec, kitty -e bash -c "profanity"
bind = $mainMod SHIFT, M, exec, kitty -e bash -c "jellyfin-tui"
bind = $mainMod SHIFT CONTROL, M, exec, kitty -e bash -c "gurk"
# Wallpaper switcher
bind = $mainMod CONTROL, W, exec, ~/.config/hypr/scripts/swww.sh
# Open toggle waybar
bind = $mainMod, B, exec, pkill -SIGUSR1 waybar

bind = $mainMod, XF86AudioPlay, exec, ~/.config/hypr/scripts/emacs-launcher '(progn (select-frame-set-input-focus (selected-frame)) (bluetooth-list-devices))'
bind = $mainMod SHIFT, XF86AudioPlay, exec, kitty -e bash -c "pulsemixer"

#bind = $mainMod, B, exec, $HOME/.config/scripts/bookmarks/rofibookmark.sh
#bind = $mainMod SHIFT, B, exec, $HOME/.config/scripts/bookmarks/bookmarkthis

bind = $mainMod, Q, killactive, 
bind = $mainMod SHIFT, Q, exec, hyprlock 
bind = $mainMod CONTROL, Q, exit,
bind = $mainMod SHIFT CONTROL, L, exec, hyprctl dispatch dpms toggle
bind = $mainMod SHIFT, space, togglefloating, 
bind = $mainMod SHIFT, space, centerwindow
bind = $mainMod, T, togglesplit, # dwindle
bind = $mainMod SHIFT, F, fullscreen

# DWM-like window binds
bind = $mainMod, H, resizeactive, -20 0
bind = $mainMod, J, cyclenext, prev
bind = $mainMod, K, cyclenext
bind = $mainMod, L, resizeactive, 20 0
bind = $mainMod SHIFT, J, swapnext, prev
bind = $mainMod SHIFT, K, swapnext

# Switch workspaces with mainMod + [0-9]
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9

# Move active window to a workspace with mainMod + CTRL + SHIFT + [0-7]
bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6
bind = $mainMod SHIFT, 7, movetoworkspace, 7
bind = $mainMod SHIFT, 8, movetoworkspace, 8
bind = $mainMod SHIFT, 9, movetoworkspace, 9

# Resizing

# Media controls
bind = , XF86AudioPrev, exec, playerctl previous
# bind = ALT, comma, exec, ~/.config/hypr/scripts/music-player-client previous

bind = , XF86AudioNext, exec, playerctl next
# bind = ALT , period, exec, ~/.config/hypr/scripts/music-player-client next

bind = , XF86AudioPlay, exec, playerctl play-pause
# bind = ALT, SPACE, exec, ~/.config/hypr/scripts/music-player-client play-pause

bind = , XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bind = $mainMod, minus, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-

bind = , XF86AudioRaiseVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%+
bind = $mainMod, equal, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%+

bind = , XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle

# Brightness controls
bind = , XF86MonBrightnessDown,exec,brightnessctl set 5%-
bind = , XF86MonBrightnessUp,exec,brightnessctl set +5%

# Mute and unmute:
bind = , XF86AudioMicMute, exec, amixer set Capture toggle

# Example special workspace (scratchpad)
exec-once = hyprctl keyword workspace special:magic, on-created-empty, ~/.config/scripts/scratch.sh
bind = $mainMod, S, togglespecialworkspace, magic
bind = $mainMod SHIFT, S, movetoworkspace, special:magic

# Scroll through existing workspaces with mainMod + scroll
bind = $mainMod, mouse_down, workspace, e-1
bind = $mainMod, mouse_up, workspace, e+1

# Move/resize windows with mainMod + LMB/RMB and dragging
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow
